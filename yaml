trigger:
- main  # Adjust according to your branch strategy

pool:
  vmImage: 'windows-latest'  # You can use another image based on your needs

steps:
- task: UseDotNet@2
  inputs:
    packageType: 'sdk'
    version: '7.x'  # Replace with the version you need

- script: |
    echo Installing SqlPackage...
    choco install sqlpackage --version 18.12.1  # Replace with the version you need
  displayName: 'Install SqlPackage'

- script: |
    echo Building DACPAC...
    SqlPackage.exe /Action:Build /SourceFile:$(Build.SourcesDirectory)/YourProjectFile.sqlproj /TargetFile:$(Build.ArtifactStagingDirectory)/YourDatabase.dacpac
  displayName: 'Build DACPAC'

- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    ArtifactName: 'dacpac'
    publishLocation: 'Container'
  displayName: 'Publish DACPAC Artifact'
